{
  "$schema": "error-patterns-v1",
  "version": "2026.02.07",
  "patterns": [
    {
      "id": "claude-duplicate-install",
      "tool": "claude-code",
      "category": "installation",
      "keywords": [
        "multiple",
        "duplicate",
        "npm",
        "native",
        "which",
        "path",
        "Multiple claude binaries",
        "binaries found"
      ],
      "detect": {
        "command": "which -a claude 2>/dev/null | wc -l",
        "condition": "gt",
        "value": 1
      },
      "message": "Multiple Claude Code installations found",
      "severity": "error",
      "fix": {
        "command": "npm -g uninstall @anthropic-ai/claude-code",
        "description": "Remove deprecated npm installation"
      }
    },
    {
      "id": "claude-npm-deprecated",
      "tool": "claude-code",
      "category": "installation",
      "keywords": [
        "npm",
        "deprecated",
        "anthropic-ai",
        "uninstall"
      ],
      "detect": {
        "command": "npm list -g @anthropic-ai/claude-code 2>/dev/null | grep -c claude-code || echo 0",
        "condition": "gt",
        "value": 0
      },
      "message": "Deprecated npm installation exists",
      "severity": "error",
      "fix": {
        "command": "npm -g uninstall @anthropic-ai/claude-code",
        "description": "Remove npm installation, use native"
      }
    },
    {
      "id": "claude-settings-schema",
      "tool": "claude-code",
      "category": "config",
      "keywords": [
        "schema",
        "settings.json",
        "schemastore",
        "invalid"
      ],
      "detect": {
        "command": "jq -r '.\"$schema\" // \"missing\"' ~/.claude/settings.json 2>/dev/null",
        "condition": "neq",
        "value": "https://json.schemastore.org/claude-code-settings.json"
      },
      "message": "Invalid or missing $schema in settings.json",
      "severity": "error",
      "fix": {
        "command": "jq '.\"$schema\" = \"https://json.schemastore.org/claude-code-settings.json\"' ~/.claude/settings.json > /tmp/s.json && mv /tmp/s.json ~/.claude/settings.json",
        "description": "Set correct schema URL"
      }
    },
    {
      "id": "claude-deprecated-mcp-location",
      "tool": "claude-code",
      "category": "config",
      "keywords": [
        "mcp.json",
        "deprecated",
        "location",
        "config"
      ],
      "detect": {
        "command": "test -f ~/.mcp.json && echo 1 || echo 0",
        "condition": "eq",
        "value": 1
      },
      "message": "Deprecated ~/.mcp.json exists",
      "severity": "warning",
      "fix": {
        "command": "echo 'Move MCP config to ~/.claude/claude_code_config.json'",
        "description": "Migrate to correct location"
      }
    },
    {
      "id": "claude-invalid-json-settings",
      "tool": "claude-code",
      "category": "config",
      "keywords": [
        "json",
        "syntax",
        "parse",
        "invalid",
        "settings"
      ],
      "detect": {
        "command": "jq empty ~/.claude/settings.json 2>&1 && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "Invalid JSON in settings.json",
      "severity": "error",
      "fix": {
        "command": "cp ~/.claude/settings.json ~/.claude/settings.json.bak && echo '{}' > ~/.claude/settings.json && echo 'âœ… Reset to empty JSON. Backup: ~/.claude/settings.json.bak'",
        "description": "Backup and reset to valid empty JSON",
        "verify": "jq empty ~/.claude/settings.json && echo 'Valid JSON'"
      }
    },
    {
      "id": "claude-invalid-json-mcp",
      "tool": "claude-code",
      "category": "config",
      "keywords": [
        "json",
        "syntax",
        "parse",
        "invalid",
        "mcp",
        "config"
      ],
      "detect": {
        "command": "test -f ~/.claude/claude_code_config.json && (jq empty ~/.claude/claude_code_config.json 2>&1 && echo 0 || echo 1) || echo skip",
        "condition": "eq",
        "value": 1
      },
      "message": "Invalid JSON in claude_code_config.json",
      "severity": "error",
      "fix": {
        "command": "cp ~/.claude/claude_code_config.json ~/.claude/claude_code_config.json.bak 2>/dev/null; echo '{\"mcpServers\":{}}' > ~/.claude/claude_code_config.json && echo 'âœ… Reset to minimal valid config. Backup saved if existed.'",
        "description": "Backup and reset to valid minimal MCP config",
        "verify": "jq empty ~/.claude/claude_code_config.json && echo 'Valid JSON'"
      }
    },
    {
      "id": "opencode-uint64-schema",
      "tool": "opencode",
      "category": "schema",
      "keywords": [
        "uint64",
        "format",
        "ignored",
        "schema",
        "warning",
        "mcp"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "unknown format \"uint64\" ignored"
      },
      "message": "MCP schema uses non-standard uint64 format (warning only)",
      "severity": "info",
      "fix": {
        "command": "echo 'âœ… This warning is SAFE TO IGNORE' && echo '' && echo 'Reason: Some MCP servers use uint64 format which is not' && echo 'part of standard JSON Schema, but works correctly.' && echo '' && echo 'No action needed - this is informational only.'",
        "description": "Informational: uint64 format warning is safe to ignore",
        "action": "ignore"
      }
    },
    {
      "id": "opencode-no-provider",
      "tool": "opencode",
      "category": "config",
      "keywords": [
        "provider",
        "api",
        "key",
        "connect",
        "anthropic",
        "openai"
      ],
      "detect": {
        "command": "test -f ~/.config/opencode/opencode.json && jq -r '.provider // .providers | keys | length' ~/.config/opencode/opencode.json 2>/dev/null || echo 0",
        "condition": "eq",
        "value": 0
      },
      "message": "No AI provider configured",
      "severity": "warning",
      "fix": {
        "command": "opencode",
        "description": "Run /connect to configure provider"
      }
    },
    {
      "id": "opencode-old-version",
      "tool": "opencode",
      "category": "installation",
      "keywords": [
        "version",
        "incompatible",
        "upgrade",
        "old"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "Incompatible version"
      },
      "message": "Old OpenCode version conflict",
      "severity": "error",
      "fix": {
        "command": "npm uninstall -g opencode-ai && brew install anomalyco/tap/opencode",
        "description": "Remove old version and reinstall"
      }
    },
    {
      "id": "openclaw-gateway-down",
      "tool": "openclaw",
      "category": "service",
      "keywords": [
        "gateway",
        "18789",
        "connection",
        "refused",
        "health"
      ],
      "detect": {
        "command": "curl -sf http://localhost:18789/health >/dev/null 2>&1 && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "OpenClaw gateway not responding",
      "severity": "warning",
      "fix": {
        "command": "launchctl start openclaw.gateway 2>/dev/null || echo 'Start gateway manually'",
        "description": "Start gateway service"
      }
    },
    {
      "id": "openclaw-env-exposed",
      "tool": "openclaw",
      "category": "security",
      "keywords": [
        "env",
        "exposed",
        "token",
        "leak",
        "security",
        "git"
      ],
      "detect": {
        "command": "test -f ~/.openclaw/.env && echo 1 || echo 0",
        "condition": "eq",
        "value": 1
      },
      "message": ".env file in OpenClaw directory - potential token leak",
      "severity": "error",
      "fix": {
        "command": "mv ~/.openclaw/.env ~/.openclaw/.env.bak",
        "description": "Backup .env and rotate tokens"
      }
    },
    {
      "id": "openclaw-browserless-down",
      "tool": "openclaw",
      "category": "service",
      "keywords": [
        "browserless",
        "3000",
        "docker",
        "container"
      ],
      "detect": {
        "command": "curl -sf http://localhost:3000 >/dev/null 2>&1 && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "Browserless service not running",
      "severity": "warning",
      "fix": {
        "command": "docker compose -f ~/.openclaw/docker-compose.browserless.yml up -d",
        "description": "Start Browserless container"
      }
    },
    {
      "id": "obsidian-vault-not-found",
      "tool": "obsidian",
      "category": "config",
      "keywords": [
        "vault",
        "path",
        "obsidian",
        "not found",
        "directory"
      ],
      "detect": {
        "command": "test -d ~/Obsidian/Vault && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "Obsidian vault not found at default location",
      "severity": "warning",
      "fix": {
        "command": "echo 'ğŸ” Searching for Obsidian vaults...' && find ~ -maxdepth 4 -type d -name '.obsidian' 2>/dev/null | sed 's/\\/.obsidian$//' | head -5 && echo '' && echo 'ğŸ’¡ Set OBSIDIAN_VAULT env var:' && echo 'export OBSIDIAN_VAULT=\"/path/to/your/vault\"'",
        "description": "Search for existing vaults and show how to configure",
        "verify": "test -d \"${OBSIDIAN_VAULT:-~/Obsidian/Vault}\" && echo 'Vault found'"
      }
    },
    {
      "id": "obsidian-qmd-not-indexed",
      "tool": "obsidian",
      "category": "search",
      "keywords": [
        "qmd",
        "index",
        "search",
        "embed",
        "vector"
      ],
      "detect": {
        "command": "test -f ~/.cache/qmd/index.sqlite && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "QMD index not found - vault not searchable",
      "severity": "warning",
      "fix": {
        "command": "qmd collection add ~/Obsidian/Vault --name vault --mask '**/*.md' && qmd update && qmd embed",
        "description": "Create QMD index for vault"
      }
    },
    {
      "id": "obsidian-sync-conflict",
      "tool": "obsidian",
      "category": "sync",
      "keywords": [
        "sync",
        "conflict",
        "duplicate",
        "icloud",
        "dropbox"
      ],
      "detect": {
        "type": "file-pattern",
        "pattern": "*.sync-conflict-*"
      },
      "message": "Sync conflict files detected in vault",
      "severity": "warning",
      "fix": {
        "command": "VAULT=${OBSIDIAN_VAULT:-~/Obsidian/Vault} && echo 'ğŸ” Sync conflict files:' && find \"$VAULT\" -name '*sync-conflict*' -o -name '*.syncthing*' 2>/dev/null | head -20 && echo '' && echo 'ğŸ’¡ Review each file, keep the correct version, delete conflicts'",
        "description": "List sync conflict files for manual review",
        "verify": "find \"${OBSIDIAN_VAULT:-~/Obsidian/Vault}\" -name '*sync-conflict*' 2>/dev/null | wc -l"
      }
    },
    {
      "id": "obsidian-orphaned-notes",
      "tool": "obsidian",
      "category": "structure",
      "keywords": [
        "orphan",
        "unlinked",
        "isolated",
        "graph"
      ],
      "detect": {
        "type": "plugin-check",
        "plugin": "graph-view"
      },
      "message": "Orphaned notes detected (no incoming/outgoing links)",
      "severity": "info",
      "fix": {
        "command": "VAULT=${OBSIDIAN_VAULT:-~/Obsidian/Vault} && echo 'ğŸ” Finding orphaned notes (no [[links]])...' && find \"$VAULT\" -name '*.md' -exec grep -L '\\[\\[' {} \\; 2>/dev/null | head -10 && echo '' && echo 'ğŸ’¡ Review in Obsidian: Graph View > Filters > Orphans'",
        "description": "List notes without wiki-links for review",
        "verify": "echo 'Check Graph View in Obsidian for visual review'"
      }
    },
    {
      "id": "env-missing-jq",
      "tool": "system",
      "category": "dependency",
      "keywords": [
        "jq",
        "install",
        "json",
        "brew",
        "apt"
      ],
      "detect": {
        "command": "command -v jq >/dev/null && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "jq not installed (required for JSON processing)",
      "severity": "error",
      "fix": {
        "command": "brew install jq || apt-get install -y jq",
        "description": "Install jq"
      }
    },
    {
      "id": "env-missing-qmd",
      "tool": "system",
      "category": "dependency",
      "keywords": [
        "qmd",
        "search",
        "markdown",
        "tobi"
      ],
      "detect": {
        "command": "command -v qmd >/dev/null && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "qmd not installed (local markdown search)",
      "severity": "info",
      "fix": {
        "command": "bun install -g https://github.com/tobi/qmd",
        "description": "Install qmd for markdown search (requires bun)"
      }
    },
    {
      "id": "env-missing-bun",
      "tool": "system",
      "category": "dependency",
      "keywords": [
        "bun",
        "runtime",
        "javascript",
        "npm"
      ],
      "detect": {
        "command": "command -v bun >/dev/null && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "bun not installed (fast JavaScript runtime)",
      "severity": "info",
      "fix": {
        "command": "curl -fsSL https://bun.sh/install | bash",
        "description": "Install bun runtime"
      }
    },
    {
      "id": "npm-outdated-global",
      "tool": "system",
      "category": "dependency",
      "keywords": [
        "npm",
        "outdated",
        "global",
        "update"
      ],
      "detect": {
        "command": "npm outdated -g 2>/dev/null | wc -l | tr -d ' '",
        "condition": "gt",
        "value": 0
      },
      "message": "Outdated global npm packages detected",
      "severity": "info",
      "fix": {
        "command": "npm update -g",
        "description": "Update all global npm packages"
      }
    },
    {
      "id": "npx-cache-stale",
      "tool": "system",
      "category": "cache",
      "keywords": [
        "npx",
        "cache",
        "stale",
        "old"
      ],
      "detect": {
        "command": "test -d ~/.npm/_npx && find ~/.npm/_npx -mtime +30 -type d 2>/dev/null | wc -l | tr -d ' '",
        "condition": "gt",
        "value": 5
      },
      "message": "Stale npx cache (>30 days old)",
      "severity": "info",
      "fix": {
        "command": "rm -rf ~/.npm/_npx",
        "description": "Clear npx cache for fresh downloads"
      }
    },
    {
      "id": "claude-memory-missing",
      "tool": "claude-code",
      "category": "config",
      "keywords": [
        "CLAUDE.md",
        "memory",
        "instructions",
        "user"
      ],
      "detect": {
        "command": "test -f ~/.claude/CLAUDE.md && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "User memory file (~/.claude/CLAUDE.md) not found",
      "severity": "info",
      "fix": {
        "command": "mkdir -p ~/.claude && cat > ~/.claude/CLAUDE.md << 'EOF'\n# User Preferences\n\n## Communication\n- Language: English\n- Style: Concise, technical\n\n## Coding\n- Prefer TypeScript over JavaScript\n- Use functional patterns when appropriate\n\n## Environment\n- OS: $(uname -s)\n- Shell: $(basename $SHELL)\nEOF\necho 'âœ… Created ~/.claude/CLAUDE.md - Edit to customize your preferences'",
        "description": "Create template CLAUDE.md with common preferences",
        "verify": "test -f ~/.claude/CLAUDE.md && echo 'OK'",
        "docs_url": "https://docs.anthropic.com/en/docs/claude-code/memory"
      }
    },
    {
      "id": "claude-rules-missing",
      "tool": "claude-code",
      "category": "config",
      "keywords": [
        "rules",
        "directory",
        "modular"
      ],
      "detect": {
        "command": "test -d ~/.claude/rules && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "Rules directory (~/.claude/rules/) not found",
      "severity": "info",
      "fix": {
        "command": "mkdir -p ~/.claude/rules",
        "description": "Create rules directory for modular instructions"
      }
    },
    {
      "id": "claude-skills-empty",
      "tool": "claude-code",
      "category": "config",
      "keywords": [
        "skills",
        "commands",
        "plugins"
      ],
      "detect": {
        "command": "test -d ~/.claude/skills && ls ~/.claude/skills/*.md 2>/dev/null | wc -l | tr -d ' ' || echo 0",
        "condition": "eq",
        "value": 0
      },
      "message": "No custom skills found",
      "severity": "info",
      "fix": {
        "command": "mkdir -p ~/.claude/skills && echo 'ğŸ“š Available community skills:' && echo '  - git-master: Advanced git operations' && echo '  - playwright: Browser automation' && echo '  - frontend-ui-ux: UI/UX development' && echo '' && echo 'ğŸ’¡ To add a skill, create ~/.claude/skills/<name>.md'",
        "description": "List available skills and show how to add custom ones",
        "verify": "ls ~/.claude/skills/ 2>/dev/null || echo 'Skills directory ready'"
      }
    },
    {
      "id": "opencode-agents-missing",
      "tool": "opencode",
      "category": "config",
      "keywords": [
        "AGENTS.md",
        "agents",
        "opencode",
        "crush"
      ],
      "detect": {
        "command": "test -f ./AGENTS.md && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "AGENTS.md not found in current directory",
      "severity": "info",
      "fix": {
        "command": "echo 'ğŸ’¡ Create AGENTS.md in OpenCode/Crush:' && echo '  1. Run: opencode (or crush)' && echo '  2. Type: /init' && echo '' && echo 'Or create manually:' && cat > AGENTS.md << 'AGENTSEOF'\n# Project Instructions\n\nDescribe your project context here.\nAGENTSEOF\necho 'âœ… Created basic AGENTS.md'",
        "description": "Create AGENTS.md via /init or manually",
        "verify": "test -f ./AGENTS.md && echo 'OK'"
      }
    },
    {
      "id": "terminal-iterm2-shell-integration",
      "tool": "terminal",
      "category": "config",
      "keywords": [
        "iterm2",
        "shell",
        "integration"
      ],
      "detect": {
        "command": "test -f ~/.iterm2_shell_integration.zsh && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "iTerm2 shell integration not installed",
      "severity": "info",
      "fix": {
        "command": "curl -L https://iterm2.com/shell_integration/install_shell_integration.sh | bash",
        "description": "Install iTerm2 shell integration"
      }
    },
    {
      "id": "terminal-ghostty-config",
      "tool": "terminal",
      "category": "config",
      "keywords": [
        "ghostty",
        "config",
        "terminal"
      ],
      "detect": {
        "command": "test -d /Applications/Ghostty.app && test -f ~/.config/ghostty/config && echo 0 || test -d /Applications/Ghostty.app && echo 1 || echo skip",
        "condition": "eq",
        "value": 1
      },
      "message": "Ghostty installed but no config file",
      "severity": "info",
      "fix": {
        "command": "mkdir -p ~/.config/ghostty && touch ~/.config/ghostty/config",
        "description": "Create Ghostty config file"
      }
    },
    {
      "id": "git-user-not-set",
      "tool": "system",
      "category": "config",
      "keywords": [
        "git",
        "user",
        "email",
        "name"
      ],
      "detect": {
        "command": "git config --global user.email >/dev/null 2>&1 && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "Git user email not configured globally",
      "severity": "warning",
      "fix": {
        "command": "read -p 'Enter your email: ' EMAIL && git config --global user.email \"$EMAIL\" && read -p 'Enter your name: ' NAME && git config --global user.name \"$NAME\" && echo 'âœ… Git user configured'",
        "description": "Interactive prompt to configure git user",
        "verify": "git config --global --list | grep user"
      }
    },
    {
      "id": "ssh-key-missing",
      "tool": "system",
      "category": "security",
      "keywords": [
        "ssh",
        "key",
        "github",
        "authentication"
      ],
      "detect": {
        "command": "test -f ~/.ssh/id_ed25519 || test -f ~/.ssh/id_rsa && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "No SSH key found (needed for GitHub)",
      "severity": "info",
      "fix": {
        "command": "ssh-keygen -t ed25519 -N '' -f ~/.ssh/id_ed25519",
        "description": "Generate new SSH key"
      }
    },
    {
      "id": "beginner-sudo-npm",
      "tool": "system",
      "category": "beginner-mistake",
      "keywords": [
        "sudo",
        "npm",
        "permission",
        "root",
        "dangerous"
      ],
      "detect": {
        "command": "test -O $(npm root -g 2>/dev/null) && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "npm global directory owned by root (sudo npm was used)",
      "severity": "error",
      "fix": {
        "command": "mkdir -p ~/.npm-global && npm config set prefix '~/.npm-global' && echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.zshrc && echo 'âœ… npm prefix set to ~/.npm-global. Restart terminal or run: source ~/.zshrc'",
        "description": "Change npm prefix to user directory (avoids sudo)",
        "verify": "npm config get prefix",
        "docs_url": "https://docs.npmjs.com/resolving-eacces-permissions-errors"
      }
    },
    {
      "id": "beginner-wrong-mcp-path",
      "tool": "claude-code",
      "category": "beginner-mistake",
      "keywords": [
        "mcp",
        "path",
        "wrong",
        "config",
        "deprecated"
      ],
      "detect": {
        "command": "test -f ~/.mcp.json && echo 1 || echo 0",
        "condition": "eq",
        "value": 1
      },
      "message": "MCP config at wrong location (~/.mcp.json instead of ~/.claude/)",
      "severity": "error",
      "fix": {
        "command": "mv ~/.mcp.json ~/.claude/claude_code_config.json 2>/dev/null || true",
        "description": "Move MCP config to correct location"
      }
    },
    {
      "id": "beginner-env-in-git",
      "tool": "system",
      "category": "beginner-mistake",
      "keywords": [
        "env",
        "git",
        "secret",
        "exposed",
        "leak"
      ],
      "detect": {
        "command": "git ls-files 2>/dev/null | grep -E '^\\.env$|secrets' | head -1 | wc -l | tr -d ' '",
        "condition": "gt",
        "value": 0
      },
      "message": ".env or secrets file tracked in git (SECURITY RISK)",
      "severity": "error",
      "fix": {
        "command": "git rm --cached .env 2>/dev/null; grep -q '^.env$' .gitignore 2>/dev/null || echo '.env' >> .gitignore && echo 'âœ… Removed .env from git tracking. IMPORTANT: Rotate any exposed secrets!'",
        "description": "Remove .env from git and add to .gitignore",
        "verify": "git ls-files | grep -E '^\\.env$' || echo 'OK: .env not tracked'",
        "docs_url": "https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository"
      }
    },
    {
      "id": "beginner-node-modules-in-git",
      "tool": "system",
      "category": "beginner-mistake",
      "keywords": [
        "node_modules",
        "git",
        "bloat"
      ],
      "detect": {
        "command": "git ls-files 2>/dev/null | grep -c node_modules || echo 0",
        "condition": "gt",
        "value": 0
      },
      "message": "node_modules tracked in git (bloated repo)",
      "severity": "warning",
      "fix": {
        "command": "git rm -r --cached node_modules 2>/dev/null; grep -q '^node_modules' .gitignore 2>/dev/null || echo 'node_modules/' >> .gitignore && echo 'âœ… Removed node_modules from git. Run: git commit -m \"Remove node_modules from tracking\"'",
        "description": "Remove node_modules from git and add to .gitignore",
        "verify": "git ls-files | grep -c node_modules || echo 'OK: node_modules not tracked'"
      }
    },
    {
      "id": "failure-doc-summarized",
      "tool": "claude-code",
      "category": "failure-case",
      "keywords": [
        "documentation",
        "summarized",
        "verbatim",
        "translation"
      ],
      "detect": {
        "type": "manual-check",
        "description": "AI summarized docs instead of copying verbatim"
      },
      "message": "Documentation was summarized instead of copied verbatim",
      "severity": "error",
      "fix": {
        "command": "echo 'âœ… Correct approach for fetching docs:' && echo 'curl -s https://raw.githubusercontent.com/{owner}/{repo}/main/README.md' && echo '' && echo 'âŒ Never use WebFetch for docs - it summarizes content'",
        "description": "Use curl/wget for verbatim docs, not AI-powered fetchers",
        "example": "curl -s https://raw.githubusercontent.com/anthropics/claude-code/main/README.md"
      }
    },
    {
      "id": "failure-webfetch-verification",
      "tool": "claude-code",
      "category": "failure-case",
      "keywords": [
        "webfetch",
        "verification",
        "ai",
        "interpretation"
      ],
      "detect": {
        "type": "manual-check",
        "description": "Used WebFetch for verification (introduces AI bias)"
      },
      "message": "WebFetch used for verification (AI interpretation bias)",
      "severity": "warning",
      "fix": {
        "command": "echo 'âœ… Verification methods (no AI bias):' && echo '  1. curl -sf URL | head -20' && echo '  2. gh api repos/{owner}/{repo}/contents/{path}' && echo '  3. git show origin/main:path/to/file' && echo '' && echo 'âŒ Avoid: WebFetch, AI-powered scrapers'",
        "description": "Use direct HTTP/git for verification to avoid AI interpretation",
        "example": "curl -sf https://api.github.com/repos/owner/repo/releases/latest | jq .tag_name"
      }
    },
    {
      "id": "failure-claimed-100-percent",
      "tool": "claude-code",
      "category": "failure-case",
      "keywords": [
        "100%",
        "complete",
        "perfect",
        "claim"
      ],
      "detect": {
        "type": "manual-check",
        "description": "Claimed 100% completion without verification"
      },
      "message": "Claimed 100% without actual verification",
      "severity": "warning",
      "fix": {
        "command": "echo 'âš ï¸ Never claim 100% without evidence!' && echo '' && echo 'âœ… Correct approach:' && echo '1. Run actual verification command' && echo '2. Show raw output (not interpreted)' && echo '3. State what was verified: \"X of Y tests pass\"' && echo '' && echo 'âŒ Avoid:' && echo '- \"All done!\" without proof' && echo '- \"100% complete\" claims' && echo '- Summarizing instead of showing output'",
        "description": "Show guidelines for evidence-based completion claims",
        "example": "echo 'Tests: 42/42 passed' (actual output, not claim)"
      }
    },
    {
      "id": "failure-opencode-not-crush",
      "tool": "opencode",
      "category": "failure-case",
      "keywords": [
        "opencode",
        "crush",
        "renamed",
        "archived"
      ],
      "detect": {
        "command": "command -v opencode >/dev/null && ! command -v crush >/dev/null && echo 1 || echo 0",
        "condition": "eq",
        "value": 1
      },
      "message": "Using archived OpenCode instead of Crush",
      "severity": "warning",
      "fix": {
        "command": "brew uninstall opencode-ai/tap/opencode 2>/dev/null; brew install charmbracelet/tap/crush",
        "description": "Migrate from OpenCode to Crush"
      }
    },
    {
      "id": "failure-brew-without-cask",
      "tool": "claude-code",
      "category": "failure-case",
      "keywords": [
        "brew",
        "cask",
        "install",
        "claude-code"
      ],
      "detect": {
        "type": "manual-check",
        "description": "Used 'brew install claude-code' without --cask"
      },
      "message": "Claude Code Homebrew requires --cask flag",
      "severity": "error",
      "fix": {
        "command": "brew install --cask claude-code",
        "description": "Correct Homebrew install with --cask"
      }
    },
    {
      "id": "failure-qmd-brew-not-bun",
      "tool": "obsidian",
      "category": "failure-case",
      "keywords": [
        "qmd",
        "brew",
        "bun",
        "install"
      ],
      "detect": {
        "type": "manual-check",
        "description": "Tried to install QMD with brew instead of bun"
      },
      "message": "QMD should be installed with bun, not brew",
      "severity": "info",
      "fix": {
        "command": "bun install -g https://github.com/tobi/qmd",
        "description": "Install QMD with bun"
      }
    },
    {
      "id": "antigravity-oauth-blocked",
      "tool": "opencode",
      "category": "auth",
      "keywords": [
        "antigravity",
        "oauth",
        "google",
        "blocked"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "OAuth.*blocked|antigravity.*fail"
      },
      "message": "Google Antigravity OAuth may be blocked",
      "severity": "warning",
      "fix": {
        "command": "echo 'ğŸ”‘ Alternative providers (API key based):' && echo '1. Anthropic: export ANTHROPIC_API_KEY=sk-ant-...' && echo '2. OpenAI: export OPENAI_API_KEY=sk-...' && echo '3. OpenRouter: export OPENROUTER_API_KEY=sk-or-...' && echo '' && echo 'ğŸ’¡ Then run: opencode' && echo '   Type: /connect'",
        "description": "Show alternative API-key based providers",
        "verify": "test -n \"$ANTHROPIC_API_KEY\" -o -n \"$OPENAI_API_KEY\" && echo 'API key set'"
      }
    },
    {
      "id": "quota-rate-limit",
      "tool": "system",
      "category": "quota",
      "keywords": [
        "rate",
        "limit",
        "429",
        "too many requests",
        "quota"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "rate.limit|429|too.many.requests"
      },
      "message": "API rate limit exceeded",
      "severity": "error",
      "fix": {
        "command": "echo 'â³ Rate limit hit. Exponential backoff:' && for i in 5 10 20 40; do echo \"Waiting ${i}s...\"; sleep $i; done && echo 'âœ… Ready to retry (total wait: 75s)'",
        "description": "Wait with exponential backoff before retrying",
        "fallback": "Switch provider: Anthropic â†’ OpenAI â†’ Gemini â†’ Groq"
      }
    },
    {
      "id": "quota-context-exceeded",
      "tool": "claude-code",
      "category": "quota",
      "keywords": [
        "context",
        "exceeded",
        "token",
        "limit",
        "compact"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "context.*exceeded|token.*limit"
      },
      "message": "Context window exceeded",
      "severity": "warning",
      "fix": {
        "command": "echo 'Use /compact or /clear to reduce context'",
        "description": "Compact conversation to free context"
      }
    },
    {
      "id": "quota-daily-limit",
      "tool": "claude-code",
      "category": "quota",
      "keywords": [
        "daily",
        "limit",
        "usage",
        "exceeded"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "daily.*limit|usage.*exceeded"
      },
      "message": "Daily usage limit reached",
      "severity": "error",
      "fix": {
        "command": "echo 'â° Daily limit options:' && echo '  1. Wait for reset (usually midnight UTC)' && echo '  2. Use fallback: OpenRouter, Gemini, or local Ollama' && echo '  3. Upgrade plan: https://console.anthropic.com/settings/plans' && echo '' && TZ=UTC date '+Reset in ~%H hours (UTC midnight)'",
        "description": "Show time until reset and fallback options",
        "fallback_providers": ["openrouter", "google-gemini", "ollama"]
      }
    },
    {
      "id": "quota-fallback-provider",
      "tool": "system",
      "category": "quota",
      "keywords": [
        "fallback",
        "provider",
        "switch",
        "alternative"
      ],
      "detect": {
        "type": "manual-check",
        "description": "Primary provider quota exceeded"
      },
      "message": "Consider using fallback provider",
      "severity": "info",
      "fix": {
        "command": "echo 'ğŸ”„ Fallback provider priority:' && echo '' && echo '1. Anthropic (Claude) - Best for coding' && echo '   export ANTHROPIC_API_KEY=sk-ant-...' && echo '' && echo '2. OpenAI (GPT-4) - Good alternative' && echo '   export OPENAI_API_KEY=sk-...' && echo '' && echo '3. Google (Gemini) - Free tier available' && echo '   export GOOGLE_API_KEY=...' && echo '' && echo '4. Groq (Llama) - Fast, free tier' && echo '   export GROQ_API_KEY=gsk_...' && echo '' && echo '5. OpenRouter - Multi-provider gateway' && echo '   export OPENROUTER_API_KEY=sk-or-...'",
        "description": "Show fallback provider options with setup commands",
        "verify": "env | grep -E 'ANTHROPIC|OPENAI|GOOGLE|GROQ|OPENROUTER' | wc -l"
      }
    },
    {
      "id": "server-connection-refused",
      "tool": "system",
      "category": "server",
      "keywords": [
        "connection",
        "refused",
        "ECONNREFUSED",
        "server",
        "down"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "ECONNREFUSED|connection.refused"
      },
      "message": "Server connection refused",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ” Diagnostic:' && lsof -i :${PORT:-3000} 2>/dev/null || echo 'No process on port ${PORT:-3000}' && echo '---' && ps aux | grep -E 'node|python|java' | grep -v grep | head -5",
        "description": "Check if server process is running and listening on expected port",
        "verify": "curl -sf http://localhost:${PORT:-3000}/health || curl -sf http://localhost:${PORT:-3000}/ || echo 'Server not responding'"
      }
    },
    {
      "id": "server-timeout",
      "tool": "system",
      "category": "server",
      "keywords": [
        "timeout",
        "ETIMEDOUT",
        "slow",
        "response"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "ETIMEDOUT|timeout|timed.out"
      },
      "message": "Server request timeout",
      "severity": "warning",
      "fix": {
        "command": "echo 'ğŸ” Network diagnostic:' && ping -c 2 ${HOST:-localhost} 2>/dev/null || echo 'Host unreachable' && echo '---' && curl -w 'Time: %{time_total}s\\n' -o /dev/null -sf http://${HOST:-localhost}:${PORT:-3000}/ 2>/dev/null || echo 'Request failed'",
        "description": "Check network latency and server response time",
        "config_hint": "Increase timeout: axios.defaults.timeout = 60000 or fetch with AbortController"
      }
    },
    {
      "id": "server-ssl-error",
      "tool": "system",
      "category": "server",
      "keywords": [
        "ssl",
        "certificate",
        "https",
        "tls",
        "secure"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "SSL|certificate|CERT"
      },
      "message": "SSL/TLS certificate error",
      "severity": "error",
      "fix": {
        "command": "HOST=${1:-localhost} && echo 'ğŸ” SSL certificate check:' && echo | openssl s_client -connect $HOST:443 2>/dev/null | openssl x509 -noout -dates 2>/dev/null || echo 'Cannot verify cert' && echo '' && echo 'âš ï¸ Dev-only bypass (INSECURE):' && echo 'export NODE_TLS_REJECT_UNAUTHORIZED=0'",
        "description": "Check SSL certificate expiry and show dev bypass",
        "warning": "NODE_TLS_REJECT_UNAUTHORIZED=0 is insecure, dev only"
      }
    },
    {
      "id": "install-curl-fail",
      "tool": "system",
      "category": "install",
      "keywords": [
        "curl",
        "download",
        "fail",
        "network"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "curl.*fail|download.*fail"
      },
      "message": "curl download failed",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ” Network diagnostic:' && curl -sf https://api.github.com/zen && echo ' âœ… Internet OK' || echo ' âŒ No internet' && echo '' && echo 'ğŸ’¡ Common fixes:' && echo '  1. Add -L flag for redirects: curl -fsSL URL' && echo '  2. Check proxy: echo $http_proxy $https_proxy' && echo '  3. DNS check: nslookup github.com'",
        "description": "Run network diagnostics and show common fixes",
        "verify": "curl -sf https://api.github.com/zen"
      }
    },
    {
      "id": "install-permission-denied",
      "tool": "system",
      "category": "install",
      "keywords": [
        "permission",
        "denied",
        "EACCES",
        "access"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "EACCES|permission.denied|Permission denied"
      },
      "message": "Permission denied during installation",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ”§ Fixing npm permissions (no sudo needed):' && mkdir -p ~/.npm-global && npm config set prefix '~/.npm-global' && grep -q 'npm-global' ~/.zshrc 2>/dev/null || echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.zshrc && echo 'âœ… Done. Run: source ~/.zshrc'",
        "description": "Set npm prefix to user directory to avoid permission issues",
        "verify": "npm config get prefix | grep -q npm-global && echo 'OK'",
        "docs_url": "https://docs.npmjs.com/resolving-eacces-permissions-errors"
      }
    },
    {
      "id": "install-enoent",
      "tool": "system",
      "category": "install",
      "keywords": [
        "ENOENT",
        "not found",
        "missing",
        "file"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "ENOENT|not found|No such file"
      },
      "message": "File or directory not found",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ” Checking common paths:' && ls -la package.json 2>/dev/null || echo 'âŒ package.json missing' && ls -la node_modules 2>/dev/null || echo 'âŒ node_modules missing - run: npm install'",
        "description": "Verify required files exist and install dependencies if needed",
        "verify": "test -f package.json && test -d node_modules && echo 'OK'"
      }
    },
    {
      "id": "patch-git-conflict",
      "tool": "system",
      "category": "patch",
      "keywords": [
        "conflict",
        "merge",
        "git",
        "CONFLICT"
      ],
      "detect": {
        "command": "git status 2>/dev/null | grep -c 'both modified' || echo 0",
        "condition": "gt",
        "value": 0
      },
      "message": "Git merge conflicts detected",
      "severity": "error",
      "fix": {
        "command": "echo 'âš ï¸ Conflict files:' && git diff --name-only --diff-filter=U && echo '' && echo 'ğŸ’¡ Resolution steps:' && echo '  1. Edit each file, resolve <<<< ==== >>>> markers' && echo '  2. git add <resolved-file>' && echo '  3. git commit' && echo '' && echo 'ğŸ”§ Or abort: git merge --abort'",
        "description": "List conflict files and show resolution steps",
        "verify": "git diff --name-only --diff-filter=U | wc -l | grep -q '^0$' && echo 'No conflicts'"
      }
    },
    {
      "id": "patch-uncommitted-changes",
      "tool": "system",
      "category": "patch",
      "keywords": [
        "uncommitted",
        "changes",
        "dirty",
        "stash"
      ],
      "detect": {
        "command": "git status --porcelain 2>/dev/null | wc -l | tr -d ' '",
        "condition": "gt",
        "value": 0
      },
      "message": "Uncommitted changes in working directory",
      "severity": "warning",
      "fix": {
        "command": "git stash",
        "description": "Stash changes before pulling updates"
      }
    },
    {
      "id": "mcp-server-crash",
      "tool": "claude-code",
      "category": "server",
      "keywords": [
        "mcp",
        "crash",
        "server",
        "exit",
        "spawn"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "MCP.*crash|spawn.*fail|server.*exit"
      },
      "message": "MCP server crashed or failed to start",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ” MCP config check:' && CONFIG=~/.claude/claude_code_config.json && test -f $CONFIG && jq -r '.mcpServers | keys[]' $CONFIG 2>/dev/null || echo 'No MCP config found' && echo '' && echo 'ğŸ’¡ Common fixes:' && echo '1. Use absolute paths: which npx â†’ /usr/local/bin/npx' && echo '2. Test manually: npx -y @anthropic-ai/mcp-server-name' && echo '3. Check stderr: command 2>&1 | head'",
        "description": "Check MCP config and show common fixes",
        "verify": "jq empty ~/.claude/claude_code_config.json 2>/dev/null && echo 'Config valid'"
      }
    },
    {
      "id": "mcp-invalid-response",
      "tool": "claude-code",
      "category": "server",
      "keywords": [
        "mcp",
        "invalid",
        "response",
        "json",
        "parse"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "invalid.*response|parse.*error"
      },
      "message": "MCP server returned invalid response",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ” MCP response debugging:' && echo '1. Server must output ONLY valid JSON-RPC to stdout' && echo '2. Debug logs must go to stderr (console.error)' && echo '' && echo 'ğŸ’¡ Test your server:' && echo 'echo {\"jsonrpc\":\"2.0\",\"method\":\"initialize\",\"id\":1} | your-mcp-server 2>/dev/null | jq .' && echo '' && echo 'âŒ Common issue: console.log() in server code breaks JSON-RPC'",
        "description": "Show how to debug MCP server JSON-RPC output",
        "verify": "echo 'Test server manually with JSON-RPC initialize request'"
      }
    },
    {
      "id": "npm-peer-dependency",
      "tool": "system",
      "category": "install",
      "keywords": [
        "peer",
        "dependency",
        "npm",
        "conflict"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "peer dep|ERESOLVE|peer dependency"
      },
      "message": "npm peer dependency conflict",
      "severity": "warning",
      "fix": {
        "command": "npm install --legacy-peer-deps",
        "description": "Install with legacy peer deps resolution"
      }
    },
    {
      "id": "brew-formula-not-found",
      "tool": "system",
      "category": "install",
      "keywords": [
        "brew",
        "formula",
        "not found",
        "tap"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "No available formula|formula not found"
      },
      "message": "Homebrew formula not found",
      "severity": "error",
      "fix": {
        "command": "FORMULA=${1:-unknown} && echo 'ğŸ” Searching for formula:' && brew search $FORMULA 2>/dev/null | head -10 || echo 'brew not found' && echo '' && echo 'ğŸ’¡ Common taps:' && echo '  brew tap homebrew/cask' && echo '  brew tap homebrew/cask-fonts' && echo '  brew tap opencode-ai/tap'",
        "description": "Search for formula and show common taps",
        "verify": "brew search $FORMULA 2>/dev/null | head -1"
      }
    },
    {
      "id": "openclaw-telegram-no-response",
      "tool": "openclaw",
      "category": "telegram",
      "keywords": [
        "telegram",
        "bot",
        "no response",
        "silent",
        "ì‘ë‹µì—†ìŒ"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "telegram.*timeout|no response|ì‘ë‹µ.*ì—†"
      },
      "message": "Telegram bot not responding",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ” Diagnostic checks:' && echo '1. Gateway health:' && curl -sf http://localhost:18789/health && echo ' âœ…' || echo ' âŒ Gateway down' && echo '2. Bot token:' && test -n \"$TELEGRAM_BOT_TOKEN\" && echo ' âœ… Token set' || echo ' âŒ TELEGRAM_BOT_TOKEN not set' && echo '3. Webhook:' && curl -sf \"https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getWebhookInfo\" 2>/dev/null | jq -r '.result.url // \"Not configured\"' || echo ' Check manually'",
        "description": "Run diagnostic checks for gateway, token, and webhook",
        "verify": "curl -sf http://localhost:18789/health"
      }
    },
    {
      "id": "openclaw-telegram-token-invalid",
      "tool": "openclaw",
      "category": "telegram",
      "keywords": [
        "telegram",
        "token",
        "invalid",
        "unauthorized",
        "401"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "401|Unauthorized|invalid token"
      },
      "message": "Telegram bot token invalid or expired",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ”‘ To regenerate Telegram bot token:' && echo '1. Open Telegram, search @BotFather' && echo '2. Send: /mybots' && echo '3. Select your bot â†’ API Token â†’ Revoke' && echo '4. Update TELEGRAM_BOT_TOKEN in your env' && echo '' && open 'https://t.me/BotFather' 2>/dev/null || echo 'ğŸ’¡ Open: https://t.me/BotFather'",
        "description": "Guide to regenerate bot token via @BotFather",
        "verify": "curl -sf \"https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getMe\" | jq -r '.ok' | grep -q true && echo 'Token valid'"
      }
    },
    {
      "id": "openclaw-telegram-webhook-fail",
      "tool": "openclaw",
      "category": "telegram",
      "keywords": [
        "telegram",
        "webhook",
        "fail",
        "ssl",
        "https"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "webhook.*fail|ssl.*error|https.*required"
      },
      "message": "Telegram webhook configuration failed",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ”’ Webhook requirements:' && echo '1. HTTPS URL (not HTTP)' && echo '2. Valid SSL certificate (not self-signed)' && echo '3. Port: 443, 80, 88, or 8443' && echo '' && echo 'ğŸ’¡ For local dev, use ngrok:' && echo '  ngrok http 18789' && echo '  Then set webhook to ngrok HTTPS URL' && echo '' && echo 'Set webhook:' && echo 'curl -X POST https://api.telegram.org/bot$TOKEN/setWebhook -d url=https://your-domain.com/webhook'",
        "description": "Show webhook requirements and setup commands",
        "verify": "curl -sf \"https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getWebhookInfo\" | jq -r '.result.url'"
      }
    },
    {
      "id": "korean-ambiguous-delete",
      "tool": "system",
      "category": "korean-error",
      "keywords": [
        "ì •ë¦¬",
        "ì§€ì›Œ",
        "ì‚­ì œ",
        "delete",
        "clean",
        "ambiguous"
      ],
      "detect": {
        "type": "language-pattern",
        "pattern": "ì •ë¦¬|ì§€ì›Œ|ì—†ì• |ì¹˜ì›Œ|ë¹„ì›Œ"
      },
      "message": "Ambiguous Korean command - could mean delete or organize",
      "severity": "warning",
      "fix": {
        "command": "echo 'âš ï¸ ëª¨í˜¸í•œ ëª…ë ¹ì–´ ê°ì§€!' && echo '' && echo 'ğŸ¤” í™•ì¸ ì§ˆë¬¸ í…œí”Œë¦¿:' && echo '\"ì •ë¦¬\"ì˜ ì˜ë¯¸ê°€ ë‹¤ìŒ ì¤‘ ì–´ëŠ ê²ƒì¸ê°€ìš”?' && echo '  1. ì‚­ì œ (Delete) - íŒŒì¼/ë°ì´í„°ë¥¼ ì™„ì „íˆ ì œê±°' && echo '  2. ì •ëˆ (Organize) - êµ¬ì¡°í™”/ë¶„ë¥˜/ì´ë¦„ë³€ê²½' && echo '' && echo 'ğŸ’¡ AI í–‰ë™ ê·œì¹™:' && echo '  - ì‚­ì œ ì‘ì—… ì „ ë°˜ë“œì‹œ í™•ì¸' && echo '  - ëŒ€ìƒ ëª©ë¡ ë¨¼ì € í‘œì‹œ' && echo '  - ë˜ëŒë¦´ ìˆ˜ ì—†ìŒ ê²½ê³ '",
        "description": "Show clarification template for ambiguous Korean commands",
        "action": "ask_user"
      }
    },
    {
      "id": "korean-implicit-fix",
      "tool": "system",
      "category": "korean-error",
      "keywords": [
        "ì•ˆë¼",
        "ì´ìƒí•´",
        "ë¬¸ì œ",
        "ì—ëŸ¬",
        "implicit"
      ],
      "detect": {
        "type": "language-pattern",
        "pattern": "ì•ˆë¼|ì•ˆë¨|ì´ìƒí•´|ë¬¸ì œìˆ|ì—ëŸ¬ë‚˜"
      },
      "message": "Implicit fix request - user expects full resolution",
      "severity": "info",
      "fix": {
        "command": "echo 'ğŸ“‹ ì•”ë¬µì  ìˆ˜ì • ìš”ì²­ ì²´í¬ë¦¬ìŠ¤íŠ¸:' && echo '' && echo '\"ì•ˆë¼/ì´ìƒí•´\" = ì§„ë‹¨ë§Œ í•˜ì§€ ë§ê³  ì™„ì „íˆ í•´ê²°í•˜ë¼ëŠ” ì˜ë¯¸' && echo '' && echo 'âœ… í•„ìˆ˜ ë‹¨ê³„:' && echo '  1. FIND - ë¬¸ì œ ì›ì¸ íŒŒì•…' && echo '  2. FIX - ì‹¤ì œë¡œ ìˆ˜ì •' && echo '  3. TEST - ìˆ˜ì • í›„ í…ŒìŠ¤íŠ¸' && echo '  4. VERIFY - ê²°ê³¼ í™•ì¸ ë° ë³´ê³ ' && echo '' && echo 'âŒ ê¸ˆì§€:' && echo '  - ì§„ë‹¨ë§Œ í•˜ê³  ëë‚´ê¸°' && echo '  - \"ì´ë ‡ê²Œ í•˜ì„¸ìš”\"ë§Œ ë§í•˜ê¸°' && echo '  - ìˆ˜ì • ì—†ì´ ì„¤ëª…ë§Œ í•˜ê¸°'",
        "description": "Show checklist for implicit Korean fix requests",
        "action": "full_resolution"
      }
    },
    {
      "id": "korean-dangerous-scope",
      "tool": "system",
      "category": "korean-error",
      "keywords": [
        "ë‹¤",
        "ì „ë¶€",
        "ì‹¹",
        "ë°€ì–´",
        "ì´ˆê¸°í™”",
        "dangerous"
      ],
      "detect": {
        "type": "language-pattern",
        "pattern": "ë‹¤ ì§€ì›Œ|ì‹¹ ë°€|ì´ˆê¸°í™”|ë¦¬ì…‹"
      },
      "message": "Dangerous scope command - potential data loss",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ›‘ ìœ„í—˜í•œ ë²”ìœ„ ëª…ë ¹ì–´ ê°ì§€!' && echo '' && echo '\"ë‹¤/ì „ë¶€/ì‹¹\" = ê´‘ë²”ìœ„ ì‚­ì œ ê°€ëŠ¥ì„±' && echo '' && echo 'âš ï¸ í•„ìˆ˜ í™•ì¸ í”„ë¡œì„¸ìŠ¤:' && echo '  1. STOP - ì¦‰ì‹œ ì‹¤í–‰ ì¤‘ì§€' && echo '  2. LIST - ì˜í–¥ë°›ëŠ” í•­ëª© ëª©ë¡ í‘œì‹œ' && echo '  3. COUNT - ì‚­ì œë  íŒŒì¼/ë°ì´í„° ìˆ˜ í‘œì‹œ' && echo '  4. CONFIRM - ëª…ì‹œì  ìŠ¹ì¸ ìš”ì²­' && echo '  5. BACKUP - ê°€ëŠ¥í•˜ë©´ ë°±ì—… ë¨¼ì €' && echo '' && echo 'ğŸ’¬ í™•ì¸ í…œí”Œë¦¿:' && echo '\"Xê°œ íŒŒì¼ì´ ì‚­ì œë©ë‹ˆë‹¤. ì •ë§ ì§„í–‰í• ê¹Œìš”? (yes ì…ë ¥)\"'",
        "description": "Show safety protocol for dangerous scope commands",
        "action": "require_confirmation"
      }
    },
    {
      "id": "oh-my-opencode-impersonation-site",
      "tool": "oh-my-opencode",
      "category": "security",
      "keywords": [
        "ohmyopencode.com",
        "impersonation",
        "fake",
        "security"
      ],
      "detect": {
        "type": "manual-check",
        "description": "Downloading from ohmyopencode.com instead of GitHub"
      },
      "message": "Downloaded from impersonation site (ohmyopencode.com is NOT official)",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸš¨ ë³´ì•ˆ ê²½ê³ : ì‚¬ì¹­ ì‚¬ì´íŠ¸ ê°ì§€!' && echo '' && echo 'âŒ ìœ„í—˜: ohmyopencode.comì€ ê³µì‹ ì‚¬ì´íŠ¸ê°€ ì•„ë‹™ë‹ˆë‹¤' && echo '' && echo 'âœ… ê³µì‹ ë‹¤ìš´ë¡œë“œ ì†ŒìŠ¤:' && echo '  https://github.com/code-yeongyu/oh-my-opencode/releases' && echo '' && echo 'ğŸ” ì„¤ì¹˜ í™•ì¸:' && which oh-my-opencode 2>/dev/null && echo '' && echo 'ğŸ’¡ ì•ˆì „í•œ ì„¤ì¹˜ ë°©ë²•:' && echo '  bunx oh-my-opencode install' && echo '  (GitHubì—ì„œ ì§ì ‘ ë‹¤ìš´ë¡œë“œ)'",
        "description": "Show security warning and official download source",
        "verify": "curl -sf https://api.github.com/repos/code-yeongyu/oh-my-opencode/releases/latest | jq -r .tag_name",
        "action": "security_warning"
      }
    },
    {
      "id": "oh-my-opencode-ollama-streaming",
      "tool": "oh-my-opencode",
      "category": "config",
      "keywords": [
        "ollama",
        "streaming",
        "JSON",
        "parse",
        "EOF",
        "NDJSON"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "JSON Parse error.*EOF|Unexpected EOF"
      },
      "message": "Ollama streaming causes JSON parse error",
      "severity": "error",
      "fix": {
        "command": "CONFIG=~/.config/opencode/opencode.json && echo 'ğŸ’¡ Add to your Ollama model config:' && echo '{\"models\": {\"ollama/your-model\": {\"stream\": false}}}' && echo '' && test -f \"$CONFIG\" && echo 'Current config:' && jq '.models' \"$CONFIG\" 2>/dev/null || echo 'Config file not found'",
        "description": "Show how to disable streaming for Ollama models",
        "config_example": "{\"models\": {\"ollama/llama3\": {\"stream\": false}}}"
      }
    },
    {
      "id": "oh-my-opencode-old-opencode-version",
      "tool": "oh-my-opencode",
      "category": "installation",
      "keywords": [
        "version",
        "1.0.132",
        "1.0.150",
        "config",
        "parsing"
      ],
      "detect": {
        "type": "manual-check",
        "description": "Using OpenCode version older than 1.0.150"
      },
      "message": "OpenCode version too old (requires 1.0.150+)",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ“¦ Current version:' && opencode --version 2>/dev/null || echo 'opencode not found' && echo '' && echo 'â¬†ï¸ Upgrade command:' && echo 'brew upgrade opencode-ai/tap/opencode' && echo '' && echo 'ğŸ’¡ Or reinstall:' && echo 'brew uninstall opencode-ai/tap/opencode && brew install opencode-ai/tap/opencode'",
        "description": "Show current version and upgrade commands",
        "verify": "opencode --version 2>/dev/null | grep -E '1\\.(0\\.1[5-9]|[1-9])' && echo 'OK: Version 1.0.150+'"
      }
    },
    {
      "id": "oh-my-opencode-agents-md-missing",
      "tool": "oh-my-opencode",
      "category": "config",
      "keywords": [
        "AGENTS.md",
        "init",
        "agents",
        "missing"
      ],
      "detect": {
        "command": "test -f ./AGENTS.md && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "AGENTS.md not found (run /init-deep)",
      "severity": "info",
      "fix": {
        "command": "echo 'ğŸ’¡ To create AGENTS.md, run in OpenCode:' && echo '  /init-deep' && echo '' && echo 'Or create manually:' && echo 'cat > AGENTS.md << EOF\n# Project Instructions\n\n## Overview\nDescribe your project here.\n\n## Conventions\n- Code style\n- File structure\nEOF' && echo '' && echo 'âœ… AGENTS.md provides project context to AI agents'",
        "description": "Show how to create AGENTS.md via /init-deep or manually",
        "verify": "test -f ./AGENTS.md && echo 'OK'"
      }
    },
    {
      "id": "oh-my-opencode-plugin-not-loaded",
      "tool": "oh-my-opencode",
      "category": "installation",
      "keywords": [
        "plugin",
        "oh-my-opencode",
        "not loaded",
        "opencode.json"
      ],
      "detect": {
        "command": "cat ~/.config/opencode/opencode.json 2>/dev/null | jq -r \".plugin // []\" | grep -c oh-my-opencode || echo 0",
        "condition": "eq",
        "value": 0
      },
      "message": "oh-my-opencode plugin not in opencode.json",
      "severity": "warning",
      "fix": {
        "command": "bunx oh-my-opencode install",
        "description": "Run installer to add plugin"
      }
    },
    {
      "id": "openclaw-unknown-model",
      "tool": "openclaw",
      "category": "config",
      "keywords": [
        "Unknown model",
        "model",
        "anthropic",
        "claude-opus",
        "provider"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "Unknown model.*anthropic|model.*not found"
      },
      "message": "Unknown model ID in OpenClaw config",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ“‹ Available Anthropic models:' && echo '  anthropic/claude-opus-4-5' && echo '  anthropic/claude-sonnet-4-5' && echo '  anthropic/claude-haiku-4-5' && echo '' && echo 'ğŸ“‹ Available OpenAI models:' && echo '  openai/gpt-4o' && echo '  openai/gpt-4-turbo' && echo '' && echo 'ğŸ’¡ Check all: openclaw models' && openclaw models 2>/dev/null | head -10 || true",
        "description": "List available model IDs",
        "verify": "openclaw models 2>/dev/null | grep -q claude && echo 'OK'"
      }
    },
    {
      "id": "cursor-request-limit",
      "tool": "cursor",
      "category": "quota",
      "keywords": [
        "request limit",
        "quota",
        "premium",
        "slow requests"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "request limit|premium requests.*0"
      },
      "message": "Cursor request limit reached",
      "severity": "warning",
      "fix": {
        "command": "echo 'ğŸ’¡ Slow requests available. In Cursor: Settings > Models > Enable slow requests'",
        "description": "Switch to slow requests mode (queued, lower priority)",
        "fallback": "Wait for monthly reset or upgrade plan"
      }
    },
    {
      "id": "cursor-context-exceeded",
      "tool": "cursor",
      "category": "quota",
      "keywords": [
        "context",
        "exceeded",
        "too long",
        "conversation"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "context.*exceeded|too long for this model"
      },
      "message": "Cursor context window exceeded",
      "severity": "warning",
      "fix": {
        "command": "echo 'ğŸ’¡ Press Cmd+L then Cmd+N to start new chat. Use @codebase instead of @folder for large projects.'",
        "description": "Start fresh chat session with reduced context",
        "keybinding": "Cmd+L â†’ Cmd+N"
      }
    },
    {
      "id": "cursor-mcp-config",
      "tool": "cursor",
      "category": "config",
      "keywords": [
        "mcp",
        "config",
        "cursor",
        ".cursor"
      ],
      "detect": {
        "command": "test -f ~/.cursor/mcp.json && jq empty ~/.cursor/mcp.json 2>&1 && echo 0 || echo 1",
        "condition": "eq",
        "value": 1
      },
      "message": "Invalid or missing MCP config for Cursor",
      "severity": "warning",
      "fix": {
        "command": "mkdir -p ~/.cursor && echo '{\"mcpServers\":{}}' > ~/.cursor/mcp.json && echo 'âœ… Created ~/.cursor/mcp.json'",
        "description": "Create minimal valid MCP config file",
        "verify": "jq empty ~/.cursor/mcp.json"
      }
    },
    {
      "id": "cursor-slow-indexing",
      "tool": "cursor",
      "category": "performance",
      "keywords": [
        "indexing",
        "slow",
        "codebase",
        "cpu"
      ],
      "detect": {
        "type": "manual-check",
        "description": "@codebase returns irrelevant results or indexing never completes"
      },
      "message": "Cursor indexing is slow or incomplete",
      "severity": "info",
      "fix": {
        "command": "cat > .cursorignore << 'EOF'\nnode_modules/\ndist/\nbuild/\n*.min.js\n*.bundle.js\npackage-lock.json\n.git/\nEOF\necho 'âœ… Created .cursorignore - Rebuild index: Cmd+Shift+P > Cursor: Rebuild Codebase Index'",
        "description": "Create .cursorignore to exclude large directories",
        "verify": "test -f .cursorignore && echo 'OK'"
      }
    },
    {
      "id": "mcp-server-start-fail",
      "tool": "mcp",
      "category": "server",
      "keywords": [
        "spawn",
        "ENOENT",
        "failed to start",
        "npx"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "spawn.*ENOENT|failed to start"
      },
      "message": "MCP server failed to start",
      "severity": "error",
      "fix": {
        "command": "NPX_PATH=$(which npx) && echo \"Use absolute path in MCP config: $NPX_PATH\" && echo 'âœ… Verify: npx -y @anthropic-ai/mcp-filesystem-server /tmp'",
        "description": "Get absolute npx path for MCP config",
        "verify": "which npx && npx --version"
      }
    },
    {
      "id": "mcp-jsonrpc-invalid",
      "tool": "mcp",
      "category": "protocol",
      "keywords": [
        "JSON-RPC",
        "invalid",
        "unexpected token",
        "stdout"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "Invalid JSON-RPC|Unexpected token|Expected JSON-RPC"
      },
      "message": "MCP server returned invalid JSON-RPC",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ’¡ Fix: Wrap server command to suppress non-JSON output:' && echo '{\"command\":\"sh\",\"args\":[\"-c\",\"your-mcp-server 2>/dev/null\"]}'",
        "description": "Server printing debug to stdout breaks JSON-RPC. Redirect stderr or wrap command.",
        "example": "Use console.error() instead of console.log() in MCP server code"
      }
    },
    {
      "id": "mcp-tool-not-found",
      "tool": "mcp",
      "category": "protocol",
      "keywords": [
        "tool not found",
        "available tools",
        "mismatch"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "Tool.*not found|Available tools"
      },
      "message": "MCP tool not found",
      "severity": "error",
      "fix": {
        "command": "echo '{\"jsonrpc\":\"2.0\",\"method\":\"tools/list\",\"id\":1}' | npx -y @anthropic-ai/mcp-filesystem-server /tmp 2>/dev/null | jq -r '.result.tools[].name' 2>/dev/null || echo 'ğŸ’¡ Replace with your MCP server command to list available tools'",
        "description": "List available tools from MCP server (tools are case-sensitive)",
        "note": "Tool names must match exactly as defined in server"
      }
    },
    {
      "id": "mcp-timeout",
      "tool": "mcp",
      "category": "server",
      "keywords": [
        "timeout",
        "waiting",
        "response",
        "30000ms"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "Timeout waiting|timed out after"
      },
      "message": "MCP server response timeout",
      "severity": "warning",
      "fix": {
        "command": "echo 'ğŸ’¡ Add timeout config to MCP server definition:' && echo '{\"timeout\": 60000, \"startupTimeout\": 10000}'",
        "description": "Increase timeout from 30s default to 60s",
        "config_example": "{\"mcpServers\":{\"slow-server\":{\"command\":\"...\",\"timeout\":60000}}}"
      }
    },
    {
      "id": "provider-anthropic-auth",
      "tool": "provider",
      "category": "auth",
      "keywords": [
        "anthropic",
        "authentication",
        "invalid api key",
        "401"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "authentication_error|Invalid API Key"
      },
      "message": "Anthropic API key invalid",
      "severity": "error",
      "fix": {
        "command": "KEY=${ANTHROPIC_API_KEY:-not_set} && if [[ $KEY == sk-ant-api03-* ]]; then echo 'âœ… Key format valid (sk-ant-api03-...)'; else echo 'âŒ Invalid format. Expected: sk-ant-api03-... Got: '${KEY:0:15}'...'; fi",
        "description": "Validate Anthropic API key format",
        "regenerate_url": "https://console.anthropic.com/settings/keys"
      }
    },
    {
      "id": "provider-anthropic-overloaded",
      "tool": "provider",
      "category": "quota",
      "keywords": [
        "overloaded",
        "529",
        "anthropic",
        "capacity"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "overloaded_error|529"
      },
      "message": "Anthropic API overloaded",
      "severity": "warning",
      "fix": {
        "command": "echo 'â³ Waiting 30s before retry (529 overloaded)...' && sleep 30 && echo 'âœ… Ready to retry'",
        "description": "Wait 30s before retrying (exponential backoff recommended)",
        "fallback_providers": ["openai", "google", "openrouter"]
      }
    },
    {
      "id": "provider-openai-quota",
      "tool": "provider",
      "category": "quota",
      "keywords": [
        "openai",
        "quota",
        "exceeded",
        "insufficient"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "insufficient_quota|exceeded your current quota"
      },
      "message": "OpenAI quota exceeded",
      "severity": "error",
      "fix": {
        "command": "echo 'ğŸ’³ Add credits: https://platform.openai.com/account/billing' && echo 'ğŸ“Š Check usage: https://platform.openai.com/usage' && open 'https://platform.openai.com/account/billing' 2>/dev/null || echo 'Open URL manually'",
        "description": "Open OpenAI billing page to add credits",
        "billing_url": "https://platform.openai.com/account/billing"
      }
    },
    {
      "id": "provider-rate-limit",
      "tool": "provider",
      "category": "quota",
      "keywords": [
        "rate limit",
        "429",
        "too many requests",
        "TPM",
        "RPM"
      ],
      "detect": {
        "type": "log-pattern",
        "pattern": "rate_limit_error|429|Too Many Requests"
      },
      "message": "API rate limit exceeded",
      "severity": "warning",
      "fix": {
        "command": "for i in 1 2 4 8 16; do echo \"â³ Backoff: waiting ${i}s...\"; sleep $i; done; echo 'âœ… Exponential backoff complete (1+2+4+8+16=31s)'",
        "description": "Exponential backoff: 1s â†’ 2s â†’ 4s â†’ 8s â†’ 16s",
        "code_example": "const delay = Math.min(1000 * Math.pow(2, attempt), 60000)"
      }
    }
  ]
}
